<section>

    <header class="clearfix">
        <h1 class="pull-left">Projects list</h1>
        <br><a href="#projects/new" class="btn btn-success pull-right"><span class="hidden-xs">Got a </span>New Project?</a>
    </header>

    <hr>
    <br>

    <section>

        <form>

            <div class="btn-group">
                <button type="button" class="btn btn-default btn-sm"
                    ng-class="{active: filterStatus == ''}"
                    ng-click="setFilterStatus('')">All<span class="hidden-xs"> active projects</span></button>
                <button type="button" class="btn btn-default btn-sm text-capitalize"
                    ng-repeat="status in filterStatusOptions"
                    ng-class="{active: filterStatus == status}"
                    ng-click="setFilterStatus(status)">{{status}}</button>
                <!-- <a href="#projects/list/{{filterStatusOptions[3]}}" class="btn btn-default btn-sm text-capitalize"
                    ng-class="{active: filterStatus == filterStatusOptions[3]}">{{filterStatusOptions[3]}}</a> -->
            </div>

        </form>

        <br>

        <table class="table table-hover">
            <thead>
                <tr>
                    <th width="50%" class="text-uppercase"><span class="hidden-xs">Project </span>Name</th>
                    <th class="text-uppercase">Status</th>
                    <th width="100" class="hidden-xs text-uppercase">Deadline</th>
                    <th width="160" class="text-uppercase"><span class="hidden-xs">Work</span> Days</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr
                    ng-repeat="project in projectsList | orderBy:'remainingDays' | filterByProjectStatus:filterStatus"
                    ng-class="{
                        danger: (filterActiveStatusOptions.indexOf(project.status) > -1) && (project.remainingDays <= project.days),
                        warning: (filterActiveStatusOptions.indexOf(project.status) > -1) && (project.remainingDays <= (project.days + 2))
                    }"
                    ng-swipe-left="showActions = true"
                    ng-swipe-right="showActions = false"
                >
                    <td>
                        <b>{{project.name}}</b><br>
                        {{project.clientName}}
                    </td>
                    <td ng-show="!showActions" class="text-capitalize">{{project.status}}</td>
                    <td ng-show="!showActions" class="hidden-xs b-one-line">
                        {{project.remainingText}}<br>
                        <small class="text-muted">{{project.dateEstimatedFormatted}}</small>
                    </td>
                    <td ng-show="!showActions" class="b-one-line">
                        {{project.remainingDays}}<span class="hidden-xs"> left</span><br>
                        <small class="text-muted">{{project.days}}<span class="hidden-xs"> estimated</span></small>
                    </td>
                    <td class="text-right" colspan="{{ showActions ? 4 : 1 }}">
                        <div class="btn-group" ng-show="showActions">
                            <a href="#projects/{{project.id}}" class="btn btn-default">
                                <span class="glyphicon glyphicon-list-alt"></span>
                            </a>
                            <a href="#projects/{{project.id}}/edit" class="btn btn-default">
                                <span class="glyphicon glyphicon-pencil"></span>
                            </a>
                            <button type="button" class="btn btn-default" ng-click="deleteProject(project.id)">
                                <span class="glyphicon glyphicon-remove"></span>
                            </button>
                            <button type="button" class="btn btn-default" ng-click="showActions = false">
                                <span class="glyphicon glyphicon-chevron-right"></span>
                            </button>
                        </div>
                        <div class="btn-group" ng-show="!showActions">
                            <button type="button" class="btn btn-default" ng-click="showActions = true">
                                <span class="glyphicon glyphicon-chevron-left"></span>
                            </button>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>

        <p class="alert alert-warning text-center" ng-show="!isLoading && !(projectsList | filter: filterStatus).length">The are no Projects to display</p>
        <p class="b-loading center-block" ng-show="isLoading"></p>
    </section>

</section>
